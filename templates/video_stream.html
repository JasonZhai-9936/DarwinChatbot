<!DOCTYPE html>
<html>
<head><title>Live Stream</title></head>
<body>
  <h2>LivePortrait Streaming</h2>
  <video id="video" width="720" controls autoplay></video>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    if (Hls.isSupported()) {
      const hls = new Hls({
        liveDurationInfinity: true,
        lowLatencyMode: false,
        backBufferLength: 90,
        maxBufferLength: 120,
        maxMaxBufferLength: 120,
        maxBufferSize: 60 * 1000 * 1000,
        maxBufferHole: 0.5,
        enableWorker: true,
        appendErrorMaxRetry: 10,
        fragLoadingTimeOut: 6000,
        manifestLoadingTimeOut: 6000,
        manifestLoadingMaxRetry: 50,
        manifestLoadingRetryDelay: 2000,
        manifestLoadingMaxRetryTimeout: 64000
      });
      hls.loadSource("/static/stream/playlist.m3u8");
      hls.attachMedia(document.getElementById("video"));
    } else if (document.getElementById("video").canPlayType("application/vnd.apple.mpegurl")) {
      document.getElementById("video").src = "/static/stream/playlist.m3u8";
    }
  </script>
  <br><a href="/">⬅️ Back</a>
</body>
</html>
